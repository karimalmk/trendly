{% extends 'layout.html' %}

{% load static %}

{% block head %}
<title>Dashboard</title>
<link rel="stylesheet" href="{% static 'analytics/css/dashboard.css' %}">
<script src="{% static 'analytics/js/watchlist.js' %}" defer type="module"></script>
<script src="{% static 'analytics/js/watchlist_history.js' %}" defer type="module"></script>
{% endblock %}

{% block main %}
<div class="row">
    <div class="col-3" style="border-right: solid 1px var(--border-light)">
        <div class="sidebar">
            <div class="watchlist-options">
                {% if watchlists %}
                <h4>Watchlists</h4>
                <div class="watchlist-names">
                    {% for watchlist in watchlists %}
                    <p><input type="button" class="watchlist-name" id="{{watchlist.id}}" value="{{ watchlist.name }}">
                    </p>
                    {% endfor %}
                </div>
                <hr>
                <p><input type="button" value="View Watchlists" id="view-all-watchlists"></p>
                {% endif %}
                <p><input type="button" value="Create Watchlist" id="create-watchlist"></p>
                <hr>
            </div>
        </div>
    </div>

    <div class="col-9">
        <!-- WATCHLIST DATA PAGE -->
        <div class="watchlist-data-page single-page">
            <div style="margin-bottom: 32px !important;">
                <div class="card" style="width: 75%; align-self: center;">
                    <h3>⚠️ Notice: </h3>
                    <p>The current version of Trendly only supports <strong>stock tickers</strong>.
                        This excludes indices, ETFs, cryptocurrencies, and other financial instruments.
                        Access stocks from <strong>30+ exchanges</strong>, with quotes normalized to
                        <strong>USD</strong>!
                    </p>
                    <p> Tickers follow the <a href="https://pypi.org/project/yfinance/" target="_blank"><u>yFinance</u></a>
                        formatting convention, available <a href="https://finance.yahoo.com/lookup/"
                            target="_blank"><u>here</u></a>.</p>

                    <div class="row">
                        <div class="col-2">
                            <p>Ticker examples: </p>
                        </div>
                        <div class="col-10">
                            <table>
                                <tr>
                                    <th>AAPL</th>
                                <tr>
                                    <th>TSLA</th>
                                </tr>
                                <tr>
                                    <th>MSFT</th>
                                </tr>
                                <tr>
                                    <th>And thousands more!</th>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Watchlist Header -->
            <div>
                <div id="watchlist-header">
                    <h2 class="button-group noselect" id="watchlist-name">PLACEHOLDER</h2>
                </div>
            </div>
            <div class="add-stock"></div>
            <!-- Stock data table -->
            <table id="stock-table">
                <thead>
                    <tr>
                        <th colspan="7" id="meta-data">PLACEHOLDER FOR META-DATA</th>
                        <th class="centered">
                            <div id="edit-watchlist-data" class="dot-container">
                                <div class="dots horizontal"><span></span><span></span><span></span></div>
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th colspan="2"><button value="X">TICKER</button></th>
                        <th><button>LAST</button></th>
                        <th><button>% CHANGE</button></th>
                        <th><button>BID</button></th>
                        <th><button>ASK</button></th>
                        <th><button>VOLUME</button></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="stock-table-body"></tbody>
            </table>
            <!-- Edit Watchlist Overlay-->
            <div class="overlay edit-watchlist-container">
                <button class="close-button hard-button" id="rename-watchlist">Rename</button>
                <button class="close-button hard-button" id="edit-stocks">Add Stocks</button>
                <button class="close-button hard-button" id="delete-watchlist">Delete Watchlist</button>
            </div>
            <!-- Delete Watchlist Confirmation Overlay-->
            <div class="delete-watchlist-confirm pop-up overlay">
                <p>Are you sure you want to delete this watchlist?</p>
                <div class="button-group">
                    <button class="confirm-delete-button close-button">Confirm</button>
                    <button class="cancel-delete-button close-button">Cancel</button>
                </div>
            </div>
            <!-- Edit Stock Overlay -->
            <div class="edit-stock overlay">
                <button class="close-button hard-button" id="delete-stock-button">Delete</button>
                <button class="close-button hard-button" id="add-recording-button">Add Recording</button>
            </div>
        </div>
        <!-- WATCHLIST EDIT PAGE -->
        <div class="watchlist-edit-page single-page">
            <h2>ALL WATCHLISTS</h2>
            <table id="watchlist-table">
                <thead>
                    <tr>
                        <th colspan="1"></th>
                        <th colspan="5"> NAME </th>
                        <th colspan="2">LAST MODIFIED</th>
                    </tr>
                </thead>
                <tbody id="watchlist-table-body"></tbody>
            </table>
            <!-- DUPLICATE: Delete Watchlist Confirmation Overlay-->
            <div class="delete-watchlist-table pop-up overlay">
                <p>Are you sure you want to delete this watchlist?</p>
                <div class="button-group">
                    <button class="confirm-delete-button close-button">Confirm</button>
                    <button class="cancel-delete-button close-button">Cancel</button>
                </div>
            </div>
        </div>
        <!-- WATCHLIST CREATE PAGE -->
        <div class="watchlist-create-page single-page">
            <h2>CREATE NEW WATCHLIST</h2>
            <div class="add-watchlist">
                <input type="text" id="new-watchlist-name" placeholder="Enter watchlist name">
                <button id="create-watchlist-button">Create </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}